package modmaker;

import java.awt.image.BufferedImage;
import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.OutputStream;
import java.net.URL;
import java.nio.channels.Channels;
import java.nio.channels.ReadableByteChannel;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Enumeration;
import java.util.HashMap;
import java.util.zip.ZipEntry;
import java.util.zip.ZipFile;

import javax.imageio.ImageIO;

public class Mod {
	public ArrayList<String> vannilaItems = new ArrayList<String>();
	public HashMap<String, Item> vannilaItemLookUp = new HashMap<String, Item>();
	public static String minecraftVerstion = "1.6.4";
	private File blocks;
	private File items;
	public Mod(){
		File minecraft = new File(System.getProperty("user.home") + "/.minecraft/versions/" + this.minecraftVerstion + "/" + this.minecraftVerstion + ".jar");
		blocks = new File(System.getProperty("user.home") + "/.modmaker/blocks/");
		blocks.mkdirs();
		items = new File(System.getProperty("user.home") + "/.modmaker/items/");
		items.mkdirs();
		if(minecraft.exists()){
			
		}
		try {
			BufferedReader itemreader = new BufferedReader(new FileReader(new File(System.getProperty("user.home") + "/.modmaker/items/items.txt")));
			String line;
			while((line = itemreader.readLine()) != null){
				Item item = new Item(line.split(" ")[1].replace("_", " "));
				item.setId(Integer.parseInt(line.split(" ")[0].split(":")[0]));
				if(line.contains(":"))
					item.setMetadat(Integer.parseInt(line.split(" ")[0].split(":")[1]));
				item.setImage(new File(System.getProperty("user.home") + "/.modmaker/items/" + line.split(" ")[2] + ".png"));
				this.vannilaItemLookUp.put(item.getName(), item);
				this.vannilaItems.add(item.getName());
			}
			itemreader.close();
		} catch (Exception e) {
			e.printStackTrace();
		}	
	}
//	StringBuilder builder = new StringBuilder();
//	for(File file : blocks.listFiles()){
//		String name = "Block " + file.getName().replace(".png", "");
//		Item item = new Item(name);
//		item.setImage(file);
//		this.vannilaItems.add(name);
//		this.vannilaItemLookUp.put(name, item);
//	}
//	for(File file : items.listFiles()){
//		String name = "Item " + file.getName().replace(".png", "");
//		Item item = new Item(name);
//		item.setImage(file);
//		this.vannilaItems.add(name);
//		this.vannilaItemLookUp.put(name, item);
//	}
//	Collections.sort(this.vannilaItems);
//	for(String item : this.vannilaItems){
//		builder.append("1 " + item + "\n");
//	}
//	System.out.println(builder.toString());
	public File[] getFiles(){
		return new File[]{blocks,items};
	}
}
