package modmaker.gui;

import java.awt.Image;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.JToolBar;
import javax.swing.SpringLayout;

public class EditItem extends JDialog implements ActionListener {
	/**
	 * 
	 */
	private static final long serialVersionUID = -5667853163604646206L;
	private DialogEditItem editItem;
	public JButton icon;
	public EditItem(JFrame parent, String title, DialogEditItem editItem) {
		super(parent, title, true);
		Point p = parent.getLocation(); 
		setLocation(p.x,p.y);
		this.setSize(parent.getSize());
		this.editItem = editItem;
		this.addGui();
		setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
		setVisible(true);
	}
	private void addGui(){
		SpringLayout layout = new SpringLayout();
		this.setLayout(layout);
		JButton done = new JButton("Done");
		done.addActionListener(this);
		this.add(done);
		layout.putConstraint(SpringLayout.SOUTH, done,-20,SpringLayout.SOUTH, this.getContentPane());
		layout.putConstraint(SpringLayout.EAST, done,-20,SpringLayout.EAST, this.getContentPane());
		JToolBar name = this.generateTextBarWithLable("", "Name:", 20);
		JToolBar iD = this.generateTextBarWithLable("", "ID:", 20);
		this.add(name);
		this.add(iD);
		layout.putConstraint(SpringLayout.NORTH, iD,20,SpringLayout.SOUTH, name);
		ImageIcon imageicon = null;
			try {
				imageicon = new ImageIcon(new File("resources/textures/Tea-Bag.JPEG").toURI().toURL());
				imageicon = new ImageIcon(imageicon.getImage().getScaledInstance((int)122, (int)122, Image.SCALE_DEFAULT));
			} catch (IOException e) {
				e.printStackTrace();
			}
		icon = new JButton(imageicon);
		icon.addActionListener(new IconButtonActionListiner(icon, getParent()));
		this.add(icon);
		layout.putConstraint(SpringLayout.SOUTH, icon,-20,SpringLayout.SOUTH, this.getContentPane());
		layout.putConstraint(SpringLayout.WEST, icon,20,SpringLayout.WEST, this.getContentPane());
		layout.putConstraint(SpringLayout.NORTH, icon,-148,SpringLayout.SOUTH, this.getContentPane());
		layout.putConstraint(SpringLayout.EAST, icon,148,SpringLayout.WEST, this.getContentPane());
		JButton newRecipy = new JButton("Add New Recipy");
		this.add(newRecipy);
	}
	public void actionPerformed(ActionEvent e) {
		this.editItem.done = true;
		setVisible(false); 
		dispose(); 
	}
	public JToolBar generateTextBarWithLable(String textInBox, String lable, int lenght){
		JToolBar textBar = new JToolBar();
		textBar.setFloatable(false);
		JLabel jLable = new JLabel(lable);
		textBar.add(jLable);
		JTextField textFeild = new JTextField(textInBox, lenght);
		textBar.add(textFeild);
		return textBar;
	}
}
